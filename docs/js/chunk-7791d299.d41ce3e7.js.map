{"version":3,"sources":["webpack:///./src/views/admin/Mkfile.vue?af45","webpack:///./src/views/admin/Mkfile.vue?7157","webpack:///src/views/admin/Mkfile.vue","webpack:///./src/views/admin/Mkfile.vue?7a7f","webpack:///./src/views/admin/Mkfile.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","staticClass","directives","name","rawName","value","expression","domProps","on","$event","target","composing","title","_q","menu","_v","submit","des","ref","$imgAdd","model","callback","$$v","content","staticRenderFns","data","id","methods","console","log","$file","formdata","FormData","append","posttime","res","type","message","onClose","watch","component"],"mappings":"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","file":"js/chunk-7791d299.d41ce3e7.js","sourcesContent":["import mod from \"-!../../../node_modules/_mini-css-extract-plugin@0.9.0@mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/_css-loader@3.6.0@css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../node_modules/_vue-loader@15.9.3@vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/_postcss-loader@3.0.0@postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/_less-loader@5.0.0@less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/_vue-loader@15.9.3@vue-loader/lib/index.js??vue-loader-options!./Mkfile.vue?vue&type=style&index=0&id=7b6b7129&lang=less&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/_mini-css-extract-plugin@0.9.0@mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/_css-loader@3.6.0@css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../node_modules/_vue-loader@15.9.3@vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/_postcss-loader@3.0.0@postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/_less-loader@5.0.0@less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/_vue-loader@15.9.3@vue-loader/lib/index.js??vue-loader-options!./Mkfile.vue?vue&type=style&index=0&id=7b6b7129&lang=less&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"markdown\"}},[_c('div',{staticClass:\"articleTitle\"},[_c('div',{staticClass:\"form\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.title),expression:\"title\"}],staticClass:\"title\",attrs:{\"type\":\"text\",\"placeholder\":\"文章标题\"},domProps:{\"value\":(_vm.title)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.title=$event.target.value}}}),_c('div',{staticClass:\"menu\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.menu),expression:\"menu\"}],attrs:{\"type\":\"radio\",\"id\":\"life\",\"value\":\"life\"},domProps:{\"checked\":_vm._q(_vm.menu,\"life\")},on:{\"change\":function($event){_vm.menu=\"life\"}}}),_c('label',{attrs:{\"for\":\"life\"}},[_vm._v(\"life\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.menu),expression:\"menu\"}],attrs:{\"type\":\"radio\",\"id\":\"code\",\"value\":\"code\"},domProps:{\"checked\":_vm._q(_vm.menu,\"code\")},on:{\"change\":function($event){_vm.menu=\"code\"}}}),_c('label',{attrs:{\"for\":\"code\"}},[_vm._v(\"code\")])]),_c('div',{staticClass:\"submit\",on:{\"click\":_vm.submit}},[_vm._v(\"提交\")])]),_c('textarea',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.des),expression:\"des\"}],attrs:{\"placeholder\":\"文章简介\"},domProps:{\"value\":(_vm.des)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.des=$event.target.value}}})]),_c('mavon-editor',{ref:\"md\",staticClass:\"editor\",on:{\"imgAdd\":_vm.$imgAdd},model:{value:(_vm.content),callback:function ($$v) {_vm.content=$$v},expression:\"content\"}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div id=\"markdown\">\r\n    <div class=\"articleTitle\">\r\n      <div class=\"form\">\r\n        <input\r\n          type=\"text\"\r\n          class=\"title\"\r\n          placeholder=\"文章标题\"\r\n          v-model=\"title\"\r\n        />\r\n        <div class=\"menu\">\r\n          <input type=\"radio\" id=\"life\" value=\"life\" v-model=\"menu\" />\r\n          <label for=\"life\">life</label>\r\n          <input type=\"radio\" id=\"code\" value=\"code\" v-model=\"menu\" />\r\n          <label for=\"code\">code</label>\r\n        </div>\r\n        <div class=\"submit\" @click=\"submit\">提交</div>\r\n      </div>\r\n      <textarea placeholder=\"文章简介\" v-model=\"des\"></textarea>\r\n    </div>\r\n    <mavon-editor v-model=\"content\" class=\"editor\" ref=\"md\" @imgAdd=\"$imgAdd\" />\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport {\r\n  uploadimg,\r\n  baseUrl,\r\n  postArticle,\r\n  getarticlesdetail,\r\n} from \"@/request/api.js\";\r\nimport axios from \"axios\";\r\nimport { Message, Notification } from \"element-ui\";\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      menu: \"\",\r\n      content: \"#\",\r\n      des: \"\",\r\n      title: \"\",\r\n      id: 0,\r\n    };\r\n  },\r\n  async created() {\r\n    let id = this.$route.query.id;\r\n    console.log(id);\r\n    if (id) {\r\n      let article = await getarticlesdetail(id);\r\n      Object.assign(this, article);\r\n    }\r\n  },\r\n  methods: {\r\n    // 绑定@imgAdd event\r\n    $imgAdd(pos, $file) {\r\n      console.log($file);\r\n      // 第一步.将图片上传到服务器.\r\n      var formdata = new FormData();\r\n      formdata.append(\"image\", $file);\r\n\r\n      // 第二步.将返回的url替换到文本原位置![...](0) -> ![...](url)\r\n      // $vm.$img2Url 详情见本页末尾\r\n\r\n      uploadimg(formdata).then((url) => {\r\n        this.$refs.md.$img2Url(pos, baseUrl + url.imgSrc);\r\n      });\r\n    },\r\n    submit() {\r\n      let posttime = new Date().getTime();\r\n      if (!this.title || !this.menu || !this.des || !this.content) {\r\n        Message({ message: \"err\", type: \"error\" });\r\n      } else {\r\n        let data = {\r\n          title: this.title,\r\n          menu: this.menu,\r\n          des: this.des,\r\n          content: this.content,\r\n          posttime,\r\n        };\r\n        if (this.id) {\r\n          data.id = this.id;\r\n        }\r\n        postArticle(data).then((res) => {\r\n          console.log(res);\r\n          if (res.type == \"success\") {\r\n            Notification({\r\n              message: res.type,\r\n              type: res.type,\r\n              onClose: () => {\r\n                this.$router.push(\"/\");\r\n              },\r\n            });\r\n          }\r\n        });\r\n      }\r\n    },\r\n  },\r\n  watch: {},\r\n};\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n#markdown {\r\n  display: flex;\r\n  flex-direction: column;\r\n  position: relative;\r\n  height: 100vh;\r\n  z-index: 3;\r\n  input {\r\n    background: #fff;\r\n  }\r\n  .editor {\r\n    flex: 1;\r\n  }\r\n}\r\n.articleTitle {\r\n  .form {\r\n    display: flex;\r\n    align-items: center;\r\n    background: #fff;\r\n    .title {\r\n      flex: 1;\r\n      margin-top: 10px;\r\n      margin-right: 20px;\r\n      height: 50px;\r\n      border: none;\r\n      border-bottom: solid 1px #ccc;\r\n      font-size: 24px;\r\n      font-weight: 700;\r\n      text-indent: 2em;\r\n      outline: none;\r\n    }\r\n    .menu {\r\n      input {\r\n        margin-left: 5px;\r\n        cursor: pointer;\r\n      }\r\n    }\r\n    .submit {\r\n      margin: 0 20px;\r\n      padding: 5px;\r\n      color: #ccc;\r\n      border: solid 1px #ccc;\r\n      border-radius: 10px;\r\n      cursor: pointer;\r\n      box-sizing: border-box;\r\n      transition: 0.3s;\r\n      &:hover {\r\n        color: green;\r\n        border: solid 1px green;\r\n      }\r\n    }\r\n  }\r\n\r\n  textarea {\r\n    margin-top: 20px;\r\n    width: 100%;\r\n    border: none;\r\n    outline: none;\r\n    text-indent: 2em;\r\n    border-bottom: solid 1px #ccc;\r\n  }\r\n}\r\n</style>","import mod from \"-!../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/_thread-loader@2.1.3@thread-loader/dist/cjs.js!../../../node_modules/_babel-loader@8.1.0@babel-loader/lib/index.js!../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/_vue-loader@15.9.3@vue-loader/lib/index.js??vue-loader-options!./Mkfile.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/_thread-loader@2.1.3@thread-loader/dist/cjs.js!../../../node_modules/_babel-loader@8.1.0@babel-loader/lib/index.js!../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/_vue-loader@15.9.3@vue-loader/lib/index.js??vue-loader-options!./Mkfile.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Mkfile.vue?vue&type=template&id=7b6b7129&scoped=true&\"\nimport script from \"./Mkfile.vue?vue&type=script&lang=js&\"\nexport * from \"./Mkfile.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Mkfile.vue?vue&type=style&index=0&id=7b6b7129&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/_vue-loader@15.9.3@vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"7b6b7129\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}